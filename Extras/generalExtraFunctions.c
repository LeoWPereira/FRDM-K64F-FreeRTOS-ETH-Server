//////////////////////////////////////////////////////////////////////////////////////////////////////////////
//																											//
//     										Project     : FreeRTOS-lwIP-IoT 								//
//											  Version     : Driver 01.01 									//
//    										   Date/Time   : 2016-10-15 									//
//																											//
//													  Created by:											//
//								LEONARDO WINTER PEREIRA (leonardowinterpereira@gmail.com)					//
//											  LUCAS ZIMMERMANN CORDEIRO										//
//																											//
//////////////////////////////////////////////////////////////////////////////////////////////////////////////

/*************************************************************************************************************
 * 												DEPENDENCIAS												 *
 ************************************************************************************************************/

#include "includes.h"

/*************************************************************************************************************
* 											CONSTANTES E MACROS												 *
 ************************************************************************************************************/



/*************************************************************************************************************
 * 										DEFINICOES DE TIPOS E ESTRUTURAS									 *
 ************************************************************************************************************/



/*************************************************************************************************************
 * 										  PROTOTIPOS DE FUNCOES LOCAIS										 *
 ************************************************************************************************************/



/*************************************************************************************************************
 * 												VARIAVEIS EXTERNAVEIS										 *
 ************************************************************************************************************/



/*************************************************************************************************************
 * 												  VARIAVEIS GLOBAIS											 *
 ************************************************************************************************************/



/*************************************************************************************************************
 * 										DEFINICOES DE FUNCOES EXTERNAVEIS									 *
 ************************************************************************************************************/

#if 1
	void *_sbrk (uint32_t delta)
	{
		extern char end; /* Defined by the linker */

		static char *heap_end;

		char *prev_heap_end;

		if (heap_end == 0)
		{
			heap_end = &end;
		}

		prev_heap_end = heap_end;

		heap_end += delta;

		return (void *) prev_heap_end;
	}
#endif

void blinky_task(void *param)
{
	(void)param;

	for( ; ; )
	{
		GPIO_DRV_TogglePinOutput(LED_RED); // toggle red LED

		vTaskDelay(150/portTICK_RATE_MS); // wait for 150 ms
	}
}
